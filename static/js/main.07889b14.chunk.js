(this["webpackJsonplec-app"]=this["webpackJsonplec-app"]||[]).push([[0],{123:function(e,t,a){},155:function(e,t,a){"use strict";a.r(t);var o=a(0),n=a.n(o),s=a(10),c=a.n(s),i=(a(123),a(17)),r=a(11),l=a(106),d=a(220),u=a(49),h=a(44),j=a(107),m=a(4),p=a(196),b=a(224),g=a(199),f=a(206),x=a(156),v=a(201),O=a(203),y=a(202),w=a(204),N=a(205),S=a(207),C=a(208),P=a(209),k=a(72),T=a(210),I=a(104),A=a.n(I),L=a(2),E=Object(p.a)((function(e){return{root:{flexGrow:1},menuButton:{marginRight:e.spacing(2)},title:{flexGrow:1},list:{width:250},fullList:{width:"auto"}}}));function _(){var e=Object(r.f)();Object(o.useEffect)((function(){localStorage.getItem("user")?(console.log("user logged"),e.push({pathname:"/perfiles"})):(console.log("user dont exist"),e.push({pathname:"/"}))}),[]);var t=E(),a=n.a.useState({left:!1}),s=Object(j.a)(a,2),c=s[0],l=s[1],d=function(e,t){return function(a){("keydown"!==a.type||"Tab"!==a.key&&"Shift"!==a.key)&&l(Object(h.a)(Object(h.a)({},c),{},Object(u.a)({},e,t)))}},p=function(e){return Object(L.jsxs)("div",{className:Object(m.a)(t.list),role:"presentation",onClick:d(e,!1),onKeyDown:d(e,!1),children:[Object(L.jsxs)(g.a,{children:[Object(L.jsxs)(x.a,{button:!0,component:i.b,to:"/perfiles",children:[Object(L.jsxs)(v.a,{children:[" ",Object(L.jsx)(y.a,{})," "]}),Object(L.jsx)(O.a,{primary:"Administrar Perfiles"})]}),Object(L.jsxs)(x.a,{button:!0,component:i.b,to:"/taco",children:[Object(L.jsxs)(v.a,{children:[Object(L.jsx)(w.a,{})," "]}),Object(L.jsx)(O.a,{primary:"Digitalizar Tacos"})]}),Object(L.jsxs)(x.a,{button:!0,component:i.b,to:"/inventario",children:[Object(L.jsxs)(v.a,{children:[Object(L.jsx)(N.a,{})," "]}),Object(L.jsx)(O.a,{primary:"Inventario"})]})]}),Object(L.jsx)(f.a,{}),Object(L.jsxs)(x.a,{button:!0,component:i.b,to:"/",children:[Object(L.jsxs)(v.a,{children:[Object(L.jsx)(S.a,{})," "]}),Object(L.jsx)(O.a,{onClick:localStorage.clear(),primary:"Salir"})]})]})};return Object(L.jsxs)("div",{className:"fixed-t",children:[Object(L.jsx)(C.a,{position:"static",className:"",children:Object(L.jsxs)(P.a,{children:[Object(L.jsx)(k.a,{variant:"h6",className:t.title,children:Object(L.jsx)("div",{className:"text-center",children:" "})}),Object(L.jsx)(T.a,{edge:"start",onClick:d("left",!0),className:t.menuButton,color:"inherit","aria-label":"menu",children:Object(L.jsx)(A.a,{})})]})}),["left"].map((function(e){return Object(L.jsx)(n.a.Fragment,{children:Object(L.jsx)(b.a,{anchor:"left",open:c.left,onClose:d("left",!1),children:p("left")})},e)}))]})}var R=a(47),U=a.n(R),M=a(70),D=a(31),V=a(32),B=a(18),F=a(35),J=a(34),W=a(71),z=a.n(W),q=(a(132),a(55)),G=a.n(q),$=a(225),H=a(214),X=a(226),Z=a(223),K={urlLogin:"http://142.93.62.149:8080/api/call_kw/",urlApi:"http://142.93.62.149:8080/api/call_kw/"},Y=function(e){Object(F.a)(a,e);var t=Object(J.a)(a);function a(e){var o;return Object(D.a)(this,a),(o=t.call(this,e)).onTakePhoto=function(){var e=Object(M.a)(U.a.mark((function e(t){return U.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:o.setState((function(e){return{img:t}})),o.updateCanvas(t);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),o.sendInfoTaco=function(){var e=o.state,t=e.codigo,a=e.proveedor,n=e.fecha,s=e.precioVenta,c=e.precioCompra,i=e.codigoRojo;if(t&&a&&n&&s&&c&&i)console.log("se puede enviar"),fetch(K.urlApi,{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({host:"127.0.0.1",port:9e3,database:"lujosec",username:"admin",password:"1234567",model:"sale_taco",method:"create",options:{codigo:"2LDT15831",proveedor:a,fecha:n,precio_compra:c.replace(/\D/gm,""),precio_venta:s.replace(/\D/gm,""),codigo_taco:i}})}).then((function(e){return e.json()})).then((function(e){e.message.includes("200")?o.setState({open:!0,message:"Success !!",severity:"success",codigo:"",proveedor:"",fecha:"",precioVenta:"",precioCompra:"",codigoRojo:""}):o.setState({open:!0,message:"No se puede actualizar",severity:"warning"})})).catch((function(e){console.log(e)}));else{console.log("NO puede enviar"),o.setState({open:!0,message:"Completa todos los campos",severity:"warning"});var r=Object(B.a)(o);setTimeout((function(){r.setState={open:!1}}),2e3)}console.log(t),console.log(a),console.log(n),console.log(s),console.log(c),console.log(i)},o.state={img:"",codigo:"",proveedor:"",fecha:"",precioVenta:"",precioCompra:"",codigoRojo:"",open:!1,message:"",severety:""},o.canvas1Ref=n.a.createRef(),o.ctx1=null,o.canvas2Ref=n.a.createRef(),o.ctx2=null,o.N_PART=3,o.onInputchange=o.onInputchange.bind(Object(B.a)(o)),o}return Object(V.a)(a,[{key:"onInputchange",value:function(e){this.setState(Object(u.a)({},e.target.name,e.target.value))}},{key:"componentDidMount",value:function(){}},{key:"drawRect",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=e.x,o=e.y,n=e.w,s=e.h,c=t.borderColor,i=void 0===c?"black":c,r=t.borderWidth,l=void 0===r?1:r;this.ctx2.beginPath(),this.ctx2.strokeStyle=i,this.ctx2.lineWidth=l,this.ctx2.rect(a,o,n,s),this.ctx2.stroke()}},{key:"onCameraError",value:function(e){console.error("onCameraError",e)}},{key:"onCameraStart",value:function(e){console.log("onCameraStart")}},{key:"onCameraStop",value:function(){console.log("onCameraStop")}},{key:"updateCanvas",value:function(e){var t=this,a=this.canvas1Ref.current;this.ctx1=a.getContext("2d"),this.ctx1.beginPath();var o=new Image,n=a.height-30*a.height/100,s=a.width-25*a.width/100,c=a.height-30*a.height/100,i=a.width-25*a.width/100,r=a.height-30*a.height/100,l=a.height-30*a.height/100,d=a.width-25*a.width/100,u=a.width-25*a.width/100,h=a.height-30*a.height/100;o.onload=function(){t.ctx1.drawImage(o,0,0,a.width,a.height),t.ctx1.beginPath(),t.ctx1.moveTo(0,n),t.ctx1.lineTo(a.width,n),t.ctx1.moveTo(s,0),t.ctx1.lineTo(s,a.height),t.ctx1.strokeStyle="red",t.ctx1.stroke()},o.src=e,new Promise((function(e,o){t.getArea(a,0,0,s,n).then((function(t){t.fullTextAnnotation?e(t.fullTextAnnotation):e("texto no encontrado")}))})).then((function(e){new Promise((function(e,o){t.getArea(a,0,r,i,c).then((function(t){t.fullTextAnnotation?e(t.fullTextAnnotation.text):e("texto no encontrado")}))})).then((function(o){new Promise((function(e,o){t.getArea(a,u,h,d,l).then((function(t){t.fullTextAnnotation?e(t.fullTextAnnotation.text):e("texto no encontrado")}))})).then((function(a){console.log(e.text);var n=e?t.splitLines(e.text)[0]:"",s=e?t.splitLines(e.text)[2]:"",c=s?t.splitSpaces(s)[0]:"",i=s?t.splitSpaces(s)[1]:"",r=s?t.splitSpaces(s)[2]:"";console.log(s.length?t.splitSpaces(s):"");var l=a.length?t.splitLines(a)[0]:"",d=o.length?t.splitLines(o)[0]:"";d=d.replace("-","."),console.log("codigoRojo",l),console.log("precioCompra",d),console.log("proveedor",c),console.log("codigoProducto",n),console.log("fechaAdquisicion",i),console.log(t.decrypPrecio(r)),t.setState({codigo:n,proveedor:c,fecha:i,precioVenta:t.decrypPrecio(r),precioCompra:d,codigoRojo:l})}))}))}))}},{key:"getArea",value:function(e,t,a,o,n){var s=this,c=this.canvas2Ref.current;this.ctx2=c.getContext("2d"),this.ctx2.beginPath();var i=new Image;return i.onload=function(){var e=s.ctx1.getImageData(t,a,o,n);s.ctx2.putImageData(e,0,0)},new Promise((function(t,a){setTimeout((function(){i.src=e.toDataURL(),setTimeout((function(){Object(M.a)(U.a.mark((function e(){var a;return U.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.doSendGoogleApi(c.toDataURL());case 2:a=e.sent,console.log(a),a.data.responses[0]&&t(a.data.responses[0]);case 5:case"end":return e.stop()}}),e)})))()}),500)}),500)}))}},{key:"doSendGoogleApi",value:function(){var e=Object(M.a)(U.a.mark((function e(t){var a;return U.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={requests:[{image:{content:t.includes("png")?t.slice(22):t.slice(23)},features:[{type:"TEXT_DETECTION",maxResults:5}]}]},e.next=3,G()({method:"post",url:"https://vision.googleapis.com/v1/images:annotate?key=AIzaSyAqc1gUL7iNXSwdBWGPJNZ-MomSfJ9iFHM",data:a,config:{headers:{"Content-Type":"application/json"}}});case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"splitLines",value:function(e){if(e)return e.split(/\r\n|\r|\n/)}},{key:"splitSpaces",value:function(e){if(e)return e.split(" ")}},{key:"decrypPrecio",value:function(e){if(console.log(e),e)return e.replace("0","O"),e.replace("00","OO"),e.replace(/S/g,"$").replace(/E/g,"1").replace(/R/g,"2").replace(/A/g,"3").replace(/S/g,"4").replace(/M/g,"5").replace(/O/g,"6").replace(/C/g,"7").replace(/L/g,"8").replace(/U/g,"9").replace(/Z/g,"0")}},{key:"render",value:function(){var e=this;return Object(L.jsxs)("div",{className:"start-job-container p-1 mt-5",children:[Object(L.jsx)(z.a,{onTakePhoto:function(t){e.onTakePhoto(t)},onCameraError:function(t){e.onCameraError(t)},idealFacingMode:W.FACING_MODES.ENVIRONMENT,idealResolution:{width:640,height:480},imageType:W.IMAGE_TYPES.JPG,imageCompression:.97,isMaxResolution:!1,isImageMirror:!1,isSilentMode:!0,isDisplayStartCameraError:!0,isFullscreen:!1,sizeFactor:1,onCameraStart:function(t){e.onCameraStart(t)},onCameraStop:function(){e.onCameraStop()},className:"mt-5"}),Object(L.jsx)("p",{}),Object(L.jsx)("canvas",{id:"canvas1",ref:this.canvas1Ref,className:"col-auto mx-auto d-flex   p-1",height:"280",children:" "}),Object(L.jsx)("canvas",{id:"canvas2",ref:this.canvas2Ref,className:"col-auto mx-auto d-flex   p-1",height:"280",children:" "}),Object(L.jsxs)("div",{className:"container-fluid ",children:[Object(L.jsxs)("div",{className:"row ",children:[Object(L.jsx)("div",{className:"col-12 d-flex mt-4",children:Object(L.jsx)($.a,{id:"outlined-basic",className:"m-1 col-12 col-sm-10 col-md-6 col-lg-6 mx-auto",label:"Codigo",name:"codigo",type:"text",value:this.state.codigo,onChange:this.onInputchange,variant:"filled"})}),Object(L.jsx)("div",{className:"col-12 d-flex mt-4",children:Object(L.jsx)($.a,{id:"outlined-basic",className:"m-1 col-12 col-sm-10 col-md-6 col-lg-6 mx-auto",label:"Proveedor",name:"proveedor",type:"text",value:this.state.proveedor,onChange:this.onInputchange,variant:"filled"})}),Object(L.jsx)("div",{className:"col-12 d-flex mt-4",children:Object(L.jsx)($.a,{id:"outlined-basic",className:"m-1 col-12 col-sm-10 col-md-6 col-lg-6 mx-auto",label:"Fecha",name:"fecha",type:"text",value:this.state.fecha,onChange:this.onInputchange,variant:"filled"})}),Object(L.jsx)("div",{className:"col-12 d-flex mt-4",children:Object(L.jsx)($.a,{id:"outlined-basic",className:"m-1 col-12 col-sm-10 col-md-6 col-lg-6 mx-auto",label:"Precio compra",name:"precioCompra",type:"text",value:this.state.precioCompra,onChange:this.onInputchange,variant:"filled"})}),Object(L.jsx)("div",{className:"col-12 d-flex mt-4",children:Object(L.jsx)($.a,{id:"outlined-basic",className:"m-1 col-12 col-sm-10 col-md-6 col-lg-6 mx-auto",label:"Precio Venta",name:"precioVenta",type:"text",value:this.state.precioVenta,onChange:this.onInputchange,variant:"filled"})}),Object(L.jsx)("div",{className:"col-12 d-flex mt-4",children:Object(L.jsx)($.a,{id:"outlined-basic",className:"m-1 col-12 col-sm-10 col-md-6 col-lg-6 mx-auto",label:"Codigo Taco",name:"codigoRojo",type:"text",value:this.state.codigoRojo,onChange:this.onInputchange,variant:"filled"})})]}),Object(L.jsx)("div",{className:"row",children:Object(L.jsx)("div",{className:"col-* mx-auto",children:Object(L.jsx)(H.a,{variant:"contained",onClick:this.sendInfoTaco,className:"mt-2 ",color:"secondary",children:"Enviar"})})}),Object(L.jsx)(X.a,{open:this.state.open,autoHideDuration:3e3,children:Object(L.jsx)(Z.a,{severity:this.state.severity,children:this.state.message})}),Object(L.jsx)("br",{}),Object(L.jsx)("br",{})]})]})}}]),a}(n.a.Component),Q=a(227),ee=a(229),te=a(221),ae=a(215),oe=a(216),ne=a(217);function se(e){return Object(L.jsx)(Z.a,Object(h.a)({elevation:6,variant:"filled"},e))}var ce=function(e){Object(F.a)(a,e);var t=Object(J.a)(a);function a(e){var o;return Object(D.a)(this,a),(o=t.call(this,e)).handleCedula=function(e){o.setState({cedula:e.target.value})},o.handleNombre=function(e){o.setState({nombre:e.target.value})},o.handleEdad=function(e){o.setState({edad:e.target.value})},o.handleCargo=function(e){o.setState({cargo:e.target.value})},o.handlePassword=function(e){o.setState({password:e.target.value})},o.createUsers=function(){return console.log(o.state.nombre),o.state.cedula?o.state.nombre?o.state.edad?o.state.cargo?o.state.password?void fetch(K.urlApi,{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({host:"127.0.0.1",port:9e3,database:"lujosec",username:"admin",password:"1234567",model:"res.users",method:"create",options:{login:o.state.nombre.slice(0,5).toLocaleLowerCase()+"@lujos.com",name:o.state.nombre,cargo:o.state.cargo,edad:o.state.edad,cedula:o.state.cedula,password:o.state.password}})}).then((function(e){return e.json()})).then((function(e){o.setState({isLoaded:!0}),window.location.href="/perfiles"})).catch((function(e){console.log(e)})):(o.setState({open:!0,message:"Ingresa una contrase\xf1a",severity:"warning"}),void setTimeout((function(){o.setState({open:!1,message:"",severity:""})}),1e3)):(o.setState({open:!0,message:"Selecciona un cargo",severity:"warning"}),void setTimeout((function(){o.setState({open:!1,message:"",severity:""})}),1e3)):(o.setState({open:!0,message:"Ingresa una edad v\xe1lida",severity:"warning"}),void setTimeout((function(){o.setState({open:!1,message:"",severity:""})}),1e3)):(o.setState({open:!0,message:"Ingresa un nombre",severity:"warning"}),void setTimeout((function(){o.setState({open:!1,message:"",severity:""})}),1e3)):(o.setState({open:!0,message:"Ingresar cedula",severity:"warning"}),void setTimeout((function(){o.setState({open:!1,message:"",severity:""})}),1e3))},o.updateUser=function(){var e={id:o.state.id?o.state.id:null!=o.dataProp?o.dataProp.id:"",name:o.state.nombre?o.state.nombre:null!=o.dataProp?o.dataProp.name:"",cargo:o.state.cargo?o.state.cargo:null!=o.dataProp?o.dataProp.cargo:"",edad:o.state.edad?o.state.edad:null!=o.dataProp?o.dataProp.edad:"",cedula:o.state.cedula?o.state.cedula:null!=o.dataProp?o.dataProp.cedula:"",password:o.state.password?o.state.password:null!=o.dataProp?o.dataProp.password:""};e.cargo.includes("admin")&&delete e.password,fetch(K.urlApi,{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({host:"127.0.0.1",port:9e3,database:"lujosec",username:"admin",password:"1234567",model:"res.users",method:"write",options:{fields:e,ids:[e.id]}})}).then((function(e){return e.json()})).then((function(e){o.setState({isLoaded:!0}),window.location.href="/perfiles"})).catch((function(e){console.log(e)}))},console.log("props",e.location.aboutProps),o.dataProp=e.location.aboutProps?e.location.aboutProps.data:null,o.state={id:"",cedula:"",nombre:"",edad:"",cargo:"",password:"",open:!1,message:"",severity:"",props:o.dataProp,showPassword:!1},o._isMounted=!1,o.createUsers=o.createUsers.bind(Object(B.a)(o)),o.updateUser=o.updateUser.bind(Object(B.a)(o)),o.handleCedula=o.handleCedula.bind(Object(B.a)(o)),o.handleNombre=o.handleNombre.bind(Object(B.a)(o)),o.handleEdad=o.handleEdad.bind(Object(B.a)(o)),o.handleCargo=o.handleCargo.bind(Object(B.a)(o)),o.handlePassword=o.handlePassword.bind(Object(B.a)(o)),o}return Object(V.a)(a,[{key:"render",value:function(){var e=this,t=this.dataProp||"";t.id,t.image_small,t.login,t.name;return Object(L.jsxs)("div",{className:"container-fluid mt-5",children:[Object(L.jsx)("br",{}),Object(L.jsxs)("div",{className:"row mt-5",children:[Object(L.jsx)("div",{className:"col-* mx-auto",children:Object(L.jsx)(Q.a,{src:"data:image/jpg;base64,".concat(this.dataProp?this.dataProp.image_small:"","  "),style:{width:"70px",height:"70px"}})}),Object(L.jsx)("div",{className:"col-12 d-flex mt-4",children:Object(L.jsx)($.a,{id:"outlined-basic",type:"number",className:"m-1 col-12 col-sm-10 col-md-6 col-lg-6 mx-auto",label:"C\xe9dula",onChange:this.handleCedula,defaultValue:null!=this.dataProp?this.dataProp.cedula:"",variant:"filled"})}),Object(L.jsx)("div",{className:"col-12 d-flex",children:Object(L.jsx)($.a,{id:"outlined-basic",className:"m-1 col-12 col-sm-10 col-md-6 col-lg-6 mx-auto",label:"Nombre",onChange:this.handleNombre,defaultValue:null!=this.dataProp?this.dataProp.name:"",variant:"filled"})}),Object(L.jsx)("div",{className:"col-12 d-flex",children:Object(L.jsx)($.a,{id:"outlined-basic",type:"number",className:"m-1 col-12 col-sm-10 col-md-6 col-lg-6 mx-auto",label:"Edad",onChange:this.handleEdad,defaultValue:null!=this.dataProp?this.dataProp.edad:"",variant:"filled"})}),Object(L.jsxs)("div",{className:"col-12 mt-2 ",children:[Object(L.jsx)(ee.a,{className:"col-11 col-sm-10 col-md-6 col-lg-6 mx-auto",id:"demo-controlled-open-select-label",children:"Cargo"}),Object(L.jsxs)(te.a,{placeholder:"Seleccionar",onChange:this.handleCargo,disabled:null!=this.dataProp&&this.dataProp.cargo.includes("admin"),className:"col-12 col-sm-10 col-md-6 col-lg-6 mx-auto d-block",defaultValue:null!=this.dataProp?this.dataProp.cargo:"",children:[Object(L.jsx)(ae.a,{children:"Seleccionar"}),Object(L.jsx)(ae.a,{selected:!0,value:"admin",children:"Administrador"}),Object(L.jsx)(ae.a,{value:"vendedor",children:"Vendedor"})]})]}),Object(L.jsx)("div",{className:"col-12 d-flex",children:Object(L.jsx)($.a,{id:"outlined-basic",type:this.state.showPassword?"text":"password",className:"m-1 col-auto col-sm-10 col-md-6 col-lg-6 mx-auto",label:"Contrase\xf1a",onChange:this.handlePassword,defaultValue:null!=this.dataProp?this.dataProp.password:"",InputProps:{endAdornment:Object(L.jsx)(T.a,{onClick:function(){console.log(e.state.showPassword),e.setState({showPassword:!e.state.showPassword})},children:this.state.showPassword?Object(L.jsx)(ne.a,{}):Object(L.jsx)(oe.a,{})})},variant:"filled"})})]}),Object(L.jsx)("div",{className:"row",children:Object(L.jsx)("div",{className:"col-* mx-auto",children:null!=this.state.props?Object(L.jsxs)("div",{children:[Object(L.jsx)(H.a,{variant:"contained",className:"mt-2  mr-1",color:"secondary",component:i.b,to:"/perfiles",children:"volver"}),Object(L.jsx)(H.a,{variant:"contained",className:"mt-2 ",onClick:this.updateUser,color:"secondary",component:i.b,children:"Actualizar"})]}):Object(L.jsx)(H.a,{variant:"contained",className:"mt-2",onClick:this.createUsers,color:"secondary",children:"Crear"})})}),Object(L.jsx)(X.a,{severity:"success",open:this.state.open,message:this.state.message,children:Object(L.jsx)(se,{severity:this.state.severity,children:this.state.message})})]})}}]),a}(n.a.Component);var ie=function(e){return Object(L.jsx)("div",{className:"container-fluid mt-5",children:"factura"})},re=a.p+"static/media/car.38d9b391.png",le=Object(p.a)((function(e){return{root:{"& > *":{margin:e.spacing(1)}}}}));var de=function(e){le();var t=Object(r.f)();return Object(o.useEffect)((function(){localStorage.getItem("user")?(console.log("user logged inicio"),t.push({pathname:"/perfiles"})):(console.log("user dont exist inicio"),t.push({pathname:"/"}))}),[]),Object(L.jsx)("div",{className:"container-fluid",children:Object(L.jsxs)("div",{className:"row mt-5",children:[Object(L.jsx)("div",{className:"col-12  d-flex mb-4 mt-5",children:Object(L.jsx)("img",{src:re,className:"mx-auto",height:"200",width:"200",alt:""})}),Object(L.jsx)("div",{className:"col-12 text-center mb-3",children:Object(L.jsx)("h3",{color:"secondary",children:"Lujos El\xe9ctricos Cruz"})}),Object(L.jsx)("div",{className:"col-12  d-flex",children:Object(L.jsx)(H.a,{variant:"contained",className:"mx-auto",color:"secondary",component:i.b,to:"/login",children:"Iniciar Sesi\xf3n"})})]})})},ue=a(218),he=function(e){Object(F.a)(a,e);var t=Object(J.a)(a);function a(e){var o;return Object(D.a)(this,a),(o=t.call(this,e)).state={isLoaded:!1,buscando:!1,error:!1,allProductos:[],productos:[]},o}return Object(V.a)(a,[{key:"getInventario",value:function(){var e=this;fetch(K.urlApi,{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({host:"127.0.0.1",port:9e3,database:"lujosec",username:"admin",password:"1234567",model:"product.product",method:"search_read",options:{fields:["id","default_code","name","standard_price","qty_available","image_small","write_date"],domain:[]}})}).then((function(e){return e.json()})).then((function(t){e.setState({isLoaded:!0,allProductos:t.response,productos:t.response})})).catch((function(t){console.log(t),e.setState({error:!0,isLoaded:!0})}))}},{key:"componentDidMount",value:function(){var e=this;localStorage.title="Inventario",setTimeout((function(){e.getInventario()}),500)}},{key:"render",value:function(){var e=this,t=this.state.productos;this.state.buscando;return this.state.isLoaded?this.state.error?Object(L.jsxs)("div",{className:"container-fluid mt-5",children:[Object(L.jsx)("br",{}),Object(L.jsx)("br",{}),Object(L.jsx)("div",{className:"text-center",children:"Error de conexion ... "})]}):Object(L.jsxs)("div",{className:"container-fluid mt-5",children:[Object(L.jsx)("br",{}),Object(L.jsxs)("div",{className:"col-12 mt-2 ",children:[Object(L.jsx)(ee.a,{className:"col-11 col-sm-10 col-md-6 col-lg-6 mx-auto",id:"demo-controlled-open-select-label",children:"Buscar por:"}),Object(L.jsxs)(te.a,{placeholder:"Seleccionar",id:"selectBuscar",className:"col-12 col-sm-10 col-md-6 col-lg-6 mx-auto d-block",children:[Object(L.jsx)(ae.a,{children:"Seleccionar"}),Object(L.jsx)(ae.a,{selected:!0,value:"codigo",children:"Codigo"}),Object(L.jsx)(ae.a,{value:"nombre",children:"Nombre"})]})]}),Object(L.jsxs)("div",{className:"col-12 d-flex mt-4",children:[Object(L.jsx)($.a,{id:"query",autoComplete:"off",className:"m-1 col-9 mr-1 mx-auto",label:"Buscar",variant:"filled"}),Object(L.jsx)(H.a,{variant:"contained",onClick:function(t){var a=document.getElementById("selectBuscar").innerText,o=document.getElementById("query").value;if(console.log(a.length),a.length<2&&(console.log("filtro vacio"),document.getElementById("query").value=""),o.length>2){console.log("filtrando "),console.log(a),console.log(o);var n=o.toLowerCase();if("Nombre"===a){console.log(o.length,"filtrando por nombre");var s=e.state.allProductos.filter((function(e){if(e.name.toLowerCase().includes(n))return e}));setTimeout((function(){e.setState({productos:s})}),100)}if("Codigo"===a){console.log(o.length,"filtrando por codigo");var c=e.state.allProductos.filter((function(e){if(e.default_code.includes(n))return e}));setTimeout((function(){e.setState({productos:c})}),100)}}else console.log("reseteando"),e.setState({productos:e.state.allProductos})},className:"mt-2 ",color:"secondary",children:"Buscar"})]}),Object(L.jsx)("br",{}),Object(L.jsx)("div",{children:t.map((function(e){return Object(L.jsx)(g.a,{children:Object(L.jsxs)(x.a,{button:!0,children:[Object(L.jsx)(ue.a,{children:Object(L.jsx)(Q.a,{alt:e.name,loading:"lazy",src:"data:image/jpg;base64,".concat(e?e.image_small:""," ")})}),Object(L.jsxs)("ul",{children:[Object(L.jsxs)("li",{children:[" ",Object(L.jsxs)("h5",{children:[" C\xf3digo: ",e.default_code]}),"  "]}),Object(L.jsxs)("li",{children:[" ",Object(L.jsx)("strong",{children:"Nombre: "})," ",e.name," "]}),Object(L.jsxs)("li",{children:[" ",Object(L.jsx)("strong",{children:"Stock: "})," ",e.qty_available," "]}),Object(L.jsxs)("li",{children:[" ",Object(L.jsx)("strong",{children:"Fecha Compra: "}),e.write_date," "]}),Object(L.jsxs)("li",{children:[" ",Object(L.jsx)("strong",{children:" Precio: "}),"$ ",e.standard_price.toFixed(0).replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1.")," "]})]})]})})}))})]}):Object(L.jsxs)("div",{className:"container-fluid mt-5",children:[Object(L.jsx)("br",{}),Object(L.jsx)("br",{}),Object(L.jsx)("br",{}),Object(L.jsx)("div",{className:"text-center",children:"Loading ... "})]})}}]),a}(n.a.Component);function je(e){return Object(L.jsx)(Z.a,Object(h.a)({elevation:6,variant:"filled"},e))}var me=function(e){Object(F.a)(a,e);var t=Object(J.a)(a);function a(e){var o;return Object(D.a)(this,a),(o=t.call(this,e)).doLogin=function(){fetch(K.urlLogin,{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({host:"127.0.0.1",port:9e3,database:"lujosec",username:o.state.cedula,password:o.state.pass,model:"res.users",method:"search_read",options:{fields:[],domain:[]}})}).then((function(e){return e.json()})).then((function(e){e.message.includes("200")?(localStorage.setItem("user",JSON.stringify(e)),o.setState({open:!0,message:"Iniciando Sesi\xf3n...",severity:"success"}),setTimeout((function(){o.setState({open:!1}),o.props.history.push("/perfiles")}),1500)):(o.setState({open:!0,message:"Error,  Revisa tus credenciales!.",severity:"warning"}),setTimeout((function(){o.setState({open:!1})}),3e3))})).catch((function(e){console.log(e)}))},o.state={cedula:"",pass:"",open:!1,message:"",severity:""},o._isMounted=!1,o.doAuth=o.doAuth.bind(Object(B.a)(o)),o.handleCedulaChange=o.handleCedulaChange.bind(Object(B.a)(o)),o.handlePasswordChange=o.handlePasswordChange.bind(Object(B.a)(o)),o}return Object(V.a)(a,[{key:"handleCedulaChange",value:function(e){this.setState({cedula:e.target.value})}},{key:"handlePasswordChange",value:function(e){this.setState({pass:e.target.value})}},{key:"componentWillUnmount",value:function(){this._isMounted=!1}},{key:"doAuth",value:function(){var e=this;console.log("EMail: "+this.state.cedula),console.log("Password: "+this.state.pass);var t={"json-rpc":"2.0",method:"call",params:{db:"lujosec",login:this.state.cedula,password:this.state.pass,context:{}},id:10};try{G.a.post("https://lujoselectricoscruz.sticol.com.co:443/web/session/authenticate",t,{headers:{"Content-Type":"application/json",Accept:"application/json"}}).then((function(t){console.log(t),localStorage.setItem("user",JSON.stringify(t.data.result)),t.data.error?(e.setState({open:!0,message:"Error,  Revisa tus credenciales!.",severity:"warning"}),setTimeout((function(){e.setState({open:!1})}),3e3)):(e.setState({open:!0,message:"Iniciando Sesi\xf3n...",severity:"success"}),setTimeout((function(){e.setState({open:!1}),e.props.history.push("/perfiles")}),1500))})).catch((function(e){console.log(e)}))}catch(a){console.error(a)}}},{key:"render",value:function(){return Object(L.jsxs)("div",{className:"container-fluid mt-5",children:[Object(L.jsxs)("form",{children:[Object(L.jsxs)("div",{className:"row  mt-5",children:[Object(L.jsx)("div",{className:"col-12  mx-auto text-center mt-5",children:Object(L.jsx)("h2",{children:" Iniciar Sesi\xf3n"})}),Object(L.jsx)("div",{className:"col-12  d-flex",children:Object(L.jsx)($.a,{id:"outlined-basic",className:"m-1 mx-auto",label:"Usuario",variant:"filled",value:this.state.cedula,onChange:this.handleCedulaChange})}),Object(L.jsx)("div",{className:"col-12 d-flex",children:Object(L.jsx)($.a,{id:"outlined-basic",className:"m-1 mx-auto",label:"Contrase\xf1a",variant:"filled",value:this.state.pass,onChange:this.handlePasswordChange})})]}),Object(L.jsxs)("div",{className:"row",children:[Object(L.jsx)("div",{className:"col-* mx-auto",children:Object(L.jsx)(H.a,{variant:"contained",className:"mt-2 ",color:"secondary",onClick:this.doLogin,children:"Ingresar"})}),Object(L.jsx)("br",{})]})]}),Object(L.jsx)(X.a,{severity:"success",open:this.state.open,message:this.state.message,children:Object(L.jsx)(je,{severity:this.state.severity,children:this.state.message})})]})}}]),a}(n.a.Component),pe=a(219),be=a(105),ge=a.n(be),fe=(a(151),function(e){Object(F.a)(a,e);var t=Object(J.a)(a);function a(e){var o;return Object(D.a)(this,a),(o=t.call(this,e)).state={isLoaded:!1,usuarios:[],error:!1},o}return Object(V.a)(a,[{key:"getUsers",value:function(){var e=this;fetch("/perfiles",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({host:"127.0.0.1",port:9e3,database:"lujosec",username:"admin",password:"1234567",model:"res.users",method:"search_read",options:{fields:["id","login","name","image_small","cargo","cedula","edad","password"],domain:[]}})}).then((function(e){return e.json()})).then((function(t){e.setState({usuarios:t.response,isLoaded:!0})})).catch((function(t){console.log(t),e.setState({error:!0,isLoaded:!0})}))}},{key:"componentDidMount",value:function(){var e=this;localStorage.title="Perfiles",setTimeout((function(){e.getUsers()}),500)}},{key:"render",value:function(){var e=this.state.usuarios;return console.log(e),this.state.isLoaded?this.state.error?Object(L.jsxs)("div",{className:"container-fluid mt-5",children:[Object(L.jsx)("br",{}),Object(L.jsx)("br",{}),Object(L.jsx)("div",{className:"text-center",children:"Error de conexion ... "})]}):Object(L.jsxs)("div",{className:"container-fluid mt-5",children:[Object(L.jsx)("br",{}),Object(L.jsx)("div",{children:null!=e?e.map((function(e){return Object(L.jsx)(g.a,{children:Object(L.jsxs)(x.a,{button:!0,component:i.b,to:{pathname:"/crearPerfil",aboutProps:{data:e}},children:[Object(L.jsx)(ue.a,{children:Object(L.jsx)(Q.a,{alt:"Pepito Perez",src:"data:image/jpg;base64,".concat(e.image_small)})}),Object(L.jsx)(O.a,{primary:e.name,secondary:e.cargo})]})})})):""}),Object(L.jsx)("div",{className:"col-12 d-flex fixed-b",children:Object(L.jsx)(pe.a,{color:"primary","aria-label":"add",className:" mx-auto",component:i.b,to:{pathname:"/crearPerfil",aboutProps:{data:null}},children:Object(L.jsx)(ge.a,{})})})]}):Object(L.jsxs)("div",{className:"container-fluid mt-5",children:[Object(L.jsx)("br",{}),Object(L.jsx)("br",{}),Object(L.jsx)("br",{}),Object(L.jsx)("div",{className:"text-center",children:"Loading ... "})]})}}]),a}(o.Component)),xe=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function ve(e,t){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var a=e.installing;null!=a&&(a.onstatechange=function(){"installed"===a.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://cra.link/PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}var Oe=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,230)).then((function(t){var a=t.getCLS,o=t.getFID,n=t.getFCP,s=t.getLCP,c=t.getTTFB;a(e),o(e),n(e),s(e),c(e)}))},ye=Object(l.a)({palette:{primary:{light:"#fff",main:"#f44336",dark:"#000"},secondary:{main:"#560600"}},typography:{useNextVariants:!0}});c.a.render(Object(L.jsx)(n.a.StrictMode,{children:Object(L.jsx)(d.a,{theme:ye,children:Object(L.jsxs)(i.a,{children:[Object(L.jsx)(_,{}),Object(L.jsxs)(r.c,{children:[Object(L.jsx)(r.a,{exact:!0,path:"/",component:de}),Object(L.jsx)(r.a,{exact:!0,path:"/login",component:me}),Object(L.jsx)(r.a,{exact:!0,path:"/taco",component:Y}),Object(L.jsx)(r.a,{exact:!0,path:"/perfiles",component:fe}),Object(L.jsx)(r.a,{exact:!0,path:"/factura",component:ie}),Object(L.jsx)(r.a,{exact:!0,path:"/inventario",component:he}),Object(L.jsx)(r.a,{exact:!0,path:"/crearPerfil",component:ce})]})]})})}),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("/lujos",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var t="".concat("/lujos","/service-worker.js");xe?(!function(e,t){fetch(e,{headers:{"Service-Worker":"script"}}).then((function(a){var o=a.headers.get("content-type");404===a.status||null!=o&&-1===o.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):ve(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://cra.link/PWA")}))):ve(t,e)}))}}(),Oe()}},[[155,1,2]]]);
//# sourceMappingURL=main.07889b14.chunk.js.map